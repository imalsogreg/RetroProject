\usepackage{color}

\usepackage{fontspec}

\usepackage{setspace}

\definecolor{grey}{rgb}{0.5,0.5,0.5}

\usepackage{titling}
\renewcommand\maketitlehooka{\mytitlefont}

\usepackage{titlesec}
\newcommand*{\justifyheading}{\raggedleft}
\titleformat{\chapter}[display]
  {\normalfont\huge\bfseries\justifyheading\hrule\color{grey}}{\chaptertitlename\ \thechapter}
  {20pt}{\Huge}
\titleformat{\section}
  {\normalfont\Large\bfseries\justifyheading\hrule\color{grey}}{\thesection}{1em}{}


\usepackage{blindtext}
\usepackage{textcomp}

\makeatletter
\let\old@rule\@rule
\def\@rule[#1]#2#3{\textcolor{blue}{\old@rule[#1]{#2}{#3}}}
\makeatother



\doublespacing

